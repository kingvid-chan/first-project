var bootState = {
    init: function(p) {
        if (p) {
            this.opts = p.opts;
            this.skipGuide = p.skipGuide;
        }
    },
    loadResources: function() {
        // elements.json
        mainLogic.load.atlasJSONHash('elements', '//img13.360buyimg.com/cms/jfs/t5674/334/9185706579/152878/ed11022/59844327N0bbd7af2.png', '', {"frames":[{"filename":"bar-red","frame":{"x":1057,"y":410,"w":73,"h":341},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":73,"h":341},"sourceSize":{"w":73,"h":341}},{"filename":"bar_line","frame":{"x":0,"y":0,"w":91,"h":45},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":91,"h":45},"sourceSize":{"w":91,"h":45}},{"filename":"bar_yellow","frame":{"x":1130,"y":410,"w":75,"h":341},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":75,"h":341},"sourceSize":{"w":75,"h":341}},{"filename":"bm_hand1","frame":{"x":0,"y":1262,"w":535,"h":481},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":535,"h":481},"sourceSize":{"w":535,"h":481}},{"filename":"bm_hand2","frame":{"x":535,"y":1262,"w":535,"h":481},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":535,"h":481},"sourceSize":{"w":535,"h":481}},{"filename":"bm_hand3","frame":{"x":1070,"y":1262,"w":535,"h":481},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":535,"h":481},"sourceSize":{"w":535,"h":481}},{"filename":"btn1","frame":{"x":862,"y":128,"w":238,"h":261},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":238,"h":261},"sourceSize":{"w":238,"h":261}},{"filename":"btn2","frame":{"x":1100,"y":128,"w":238,"h":261},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":238,"h":261},"sourceSize":{"w":238,"h":261}},{"filename":"click-tips","frame":{"x":0,"y":128,"w":252,"h":141},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":252,"h":141},"sourceSize":{"w":252,"h":141}},{"filename":"count0","frame":{"x":0,"y":836,"w":447,"h":426},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":447,"h":426},"sourceSize":{"w":447,"h":426}},{"filename":"count1","frame":{"x":1205,"y":410,"w":447,"h":426},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":447,"h":426},"sourceSize":{"w":447,"h":426}},{"filename":"count2","frame":{"x":894,"y":836,"w":447,"h":426},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":447,"h":426},"sourceSize":{"w":447,"h":426}},{"filename":"count3","frame":{"x":447,"y":836,"w":447,"h":426},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":447,"h":426},"sourceSize":{"w":447,"h":426}},{"filename":"default_image_small","frame":{"x":377,"y":0,"w":94,"h":93},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":94,"h":93},"sourceSize":{"w":94,"h":93}},{"filename":"goods1","frame":{"x":808,"y":410,"w":249,"h":307},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":249,"h":307},"sourceSize":{"w":249,"h":307}},{"filename":"goods2","frame":{"x":544,"y":410,"w":264,"h":307},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":264,"h":307},"sourceSize":{"w":264,"h":307}},{"filename":"goods3","frame":{"x":249,"y":410,"w":295,"h":297},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":295,"h":297},"sourceSize":{"w":295,"h":297}},{"filename":"goods4","frame":{"x":0,"y":410,"w":249,"h":297},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":249,"h":297},"sourceSize":{"w":249,"h":297}},{"filename":"guide-tit","frame":{"x":1140,"y":0,"w":546,"h":128},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":546,"h":128},"sourceSize":{"w":546,"h":128}},{"filename":"hand","frame":{"x":728,"y":0,"w":145,"h":104},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":145,"h":104},"sourceSize":{"w":145,"h":104}},{"filename":"report-con","frame":{"x":873,"y":0,"w":267,"h":122},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":267,"h":122},"sourceSize":{"w":267,"h":122}},{"filename":"start-btn","frame":{"x":624,"y":128,"w":238,"h":261},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":238,"h":261},"sourceSize":{"w":238,"h":261}},{"filename":"superGoods","frame":{"x":1338,"y":128,"w":422,"h":282},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":422,"h":282},"sourceSize":{"w":422,"h":282}},{"filename":"time-con","frame":{"x":566,"y":0,"w":162,"h":99},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":162,"h":99},"sourceSize":{"w":162,"h":99}},{"filename":"tips","frame":{"x":91,"y":0,"w":286,"h":69},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":286,"h":69},"sourceSize":{"w":286,"h":69}},{"filename":"user-small","frame":{"x":471,"y":0,"w":95,"h":95},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":95,"h":95},"sourceSize":{"w":95,"h":95}},{"filename":"woerma","frame":{"x":252,"y":128,"w":372,"h":187},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":372,"h":187},"sourceSize":{"w":372,"h":187}}]});
        // scene.json
        mainLogic.load.atlasJSONHash('scene', '//img12.360buyimg.com/cms/jfs/t5767/117/9116630312/203843/fcf53400/5981adb4N02391330.png', '', { "frames": [{ "filename": "speed-line", "frame": { "x": 0, "y": 0, "w": 750, "h": 1334 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 750, "h": 1334 }, "sourceSize": { "w": 750, "h": 1334 } }, { "filename": "supermarket", "frame": { "x": 750, "y": 0, "w": 750, "h": 1334 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 750, "h": 1334 }, "sourceSize": { "w": 750, "h": 1334 } }] });
        // loading.json
        mainLogic.load.atlasJSONHash('widget', '//img10.360buyimg.com/cms/jfs/t5932/61/8405788283/25286/8df23e70/59882517N3bab4be2.png', '', {"frames":{"act-rule":{"frame":{"x":200,"y":0,"w":87,"h":86},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":87,"h":86},"sourceSize":{"w":87,"h":86}},"bar-line":{"frame":{"x":0,"y":0,"w":26,"h":61},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":26,"h":61},"sourceSize":{"w":26,"h":61}},"close-sound-tips":{"frame":{"x":287,"y":0,"w":303,"h":77},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":303,"h":77},"sourceSize":{"w":303,"h":77}},"rules":{"frame":{"x":0,"y":87,"w":527,"h":1006},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":527,"h":1006},"sourceSize":{"w":527,"h":1006}},"sound-btn-close":{"frame":{"x":26,"y":0,"w":87,"h":87},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":87,"h":87},"sourceSize":{"w":87,"h":87}},"sound-btn-on":{"frame":{"x":113,"y":0,"w":87,"h":86},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":87,"h":86},"sourceSize":{"w":87,"h":86}}}});
        // hand.json
        mainLogic.load.atlasJSONHash('hand', '//img11.360buyimg.com/cms/jfs/t6046/361/7742397589/17240/a2e0f8e8/5981adb3Ne08feb96.png', '', { "frames": [{ "filename": "myHand-left", "frame": { "x": 0, "y": 0, "w": 351, "h": 703 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 351, "h": 703 }, "sourceSize": { "w": 351, "h": 703 } }, { "filename": "myHand-right", "frame": { "x": 351, "y": 0, "w": 365, "h": 703 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 365, "h": 703 }, "sourceSize": { "w": 365, "h": 703 } }] });
        // boss.json
        mainLogic.load.atlasJSONHash('boss', '//img30.360buyimg.com/cms/jfs/t5803/223/9122787090/123725/d9925d5e/5981adaaNc68c6025.png', '', { "frames": [{ "filename": "boss-bm-shake1", "frame": { "x": 1207, "y": 1258, "w": 750, "h": 735 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 750, "h": 735 }, "sourceSize": { "w": 750, "h": 735 } }, { "filename": "boss-bm-shake2", "frame": { "x": 457, "y": 1258, "w": 750, "h": 735 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 750, "h": 735 }, "sourceSize": { "w": 750, "h": 735 } }, { "filename": "boss-bm1", "frame": { "x": 1268, "y": 622, "w": 457, "h": 636 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 457, "h": 636 }, "sourceSize": { "w": 457, "h": 636 } }, { "filename": "boss-bm2", "frame": { "x": 0, "y": 1258, "w": 457, "h": 636 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 457, "h": 636 }, "sourceSize": { "w": 457, "h": 636 } }, { "filename": "boss-pre-superGoods", "frame": { "x": 1297, "y": 0, "w": 410, "h": 261 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 410, "h": 261 }, "sourceSize": { "w": 410, "h": 261 } }, { "filename": "myHand-shake1", "frame": { "x": 547, "y": 0, "w": 750, "h": 255 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 750, "h": 255 }, "sourceSize": { "w": 750, "h": 255 } }, { "filename": "myHand-shake2", "frame": { "x": 0, "y": 261, "w": 750, "h": 266 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 750, "h": 266 }, "sourceSize": { "w": 750, "h": 266 } }, { "filename": "myHand", "frame": { "x": 524, "y": 622, "w": 744, "h": 625 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 744, "h": 625 }, "sourceSize": { "w": 744, "h": 625 } }, { "filename": "pre-bg", "frame": { "x": 0, "y": 622, "w": 524, "h": 504 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 524, "h": 504 }, "sourceSize": { "w": 524, "h": 504 } }, { "filename": "pre-bm", "frame": { "x": 750, "y": 261, "w": 466, "h": 308 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 466, "h": 308 }, "sourceSize": { "w": 466, "h": 308 } }, { "filename": "pre-fire", "frame": { "x": 0, "y": 0, "w": 547, "h": 237 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 547, "h": 237 }, "sourceSize": { "w": 547, "h": 237 } }, { "filename": "pre-me", "frame": { "x": 1216, "y": 261, "w": 556, "h": 361 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 556, "h": 361 }, "sourceSize": { "w": 556, "h": 361 } }] });
        // result.json
        mainLogic.load.atlasJSONHash('result', '//img30.360buyimg.com/cms/jfs/t6931/100/1497615206/38263/51aca5d3/5981adb3N15e3490e.png', '', { "frames": [{ "filename": "bm_tag", "frame": { "x": 0, "y": 0, "w": 70, "h": 70 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 70, "h": 70 }, "sourceSize": { "w": 70, "h": 70 } }, { "filename": "default_image", "frame": { "x": 70, "y": 0, "w": 176, "h": 175 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 176, "h": 175 }, "sourceSize": { "w": 176, "h": 175 } }, { "filename": "image_wrapper", "frame": { "x": 246, "y": 0, "w": 175, "h": 175 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 175, "h": 175 }, "sourceSize": { "w": 175, "h": 175 } }, { "filename": "me_tag", "frame": { "x": 0, "y": 175, "w": 70, "h": 70 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 70, "h": 70 }, "sourceSize": { "w": 70, "h": 70 } }, { "filename": "result_fail", "frame": { "x": 70, "y": 175, "w": 383, "h": 506 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 383, "h": 506 }, "sourceSize": { "w": 383, "h": 506 } }, { "filename": "result_suc", "frame": { "x": 0, "y": 681, "w": 488, "h": 330 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 488, "h": 330 }, "sourceSize": { "w": 488, "h": 330 } }, { "filename": "user", "frame": { "x": 0, "y": 1011, "w": 174, "h": 173 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 174, "h": 173 }, "sourceSize": { "w": 174, "h": 173 } }, { "filename": "vs", "frame": { "x": 174, "y": 1011, "w": 193, "h": 167 }, "rotated": false, "trimmed": false, "spriteSourceSize": { "x": 0, "y": 0, "w": 193, "h": 167 }, "sourceSize": { "w": 193, "h": 167 } }] });
        mainLogic.load.audio('catch', '//static.360buyimg.com/jdcopr/activity/jingwo/catch.mp3?6372361', true);
        mainLogic.load.audio('bgm', '//static.360buyimg.com/jdcopr/activity/jingwo/jingwo_bgm.mp3?6372361', true);
        if (game.hasUserImage) {
            mainLogic.load.image('user', game.userImageUrl);
        }

        mainLogic.load.start();
    },
    create: function() {
        //  设置body背景
        $("body").addClass('ready');

        mainLogic.physics.startSystem(Phaser.Physics.ARCADE);
        mainLogic.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;

        mainLogic.load.onLoadComplete.addOnce(this.loadComplete, this);
        this.loadResources();
    },
    loadComplete: function() {
        // 播放背景音乐
        window.bgMusic = mainLogic.add.audio('bgm');
        bgMusic.loop = true;
        bgMusic.loopFull();
        $("#progress .loader-progress span").text('100%');
        if ($(".rules").hasClass('hide')) {
            $('#loader').removeClass('active').addClass('scaleOut');
            setTimeout(function() {
                $('#loader').remove();
            }, 800);
        } else {
            $(".rules").attr('data-ready', true);
        }
        bgMusic.onDecoded.addOnce(function(){
            bgMusic.play();
        }, this);

        if (this.skipGuide) {
            mainLogic.state.start('countDown', true, false, {
                opts: this.opts
            });
        } else {
            mainLogic.state.start('guide', true, false, {
                opts: this.opts
            });
        }
    }
}
module.exports = bootState;